var googleMap=document.getElementById("googleMap"),myCenter=new google.maps.LatLng(17.4994889,78.3872775),markers=[],gmarkers=[],i=0,html,mylocation,country,content,destination,mylocationL,countryL,locInfo=new Array,infowindow;!function(){function a(e,r,a,n,s,o){var u=new google.maps.Marker({map:t,icon:"mark-on.png",position:r});"true"===o?u.setIcon("mark-on.png"):u.setIcon("mark-off.png"),gmarkers[i]=u,html+='<li id="'+i+'" class = "loc-list" >'+n+"</li>",i++,google.maps.event.addListener(u,"click",function(){infowindow&&infowindow.close(),infowindow=new google.maps.InfoWindow({content:e}),infowindow.open(t,u),$(".locDiv").animate({marginLeft:"-300px"}),$(".infoDiv p.title").html('<div class=""> '+n+' <span class="new">New</span></div>'),$(".infoDiv p.info").html("<ul><li>"+s+"</li></ul>")}),markers.push(u)}var r={center:myCenter,zoom:3,disableDefaultUI:!0,mapTypeId:google.maps.MapTypeId.SATELLITE},t=new google.maps.Map(googleMap,r);html="<ul>",$.get("mylocation.xml",function(e){mylocationL=$(e).find("mylocation").size(),countryL=$(e).find("country").size(),$(e).find("mylocation").each(function(){var e=$(this);country=e.find("country").text(),content=e.find("content").text(),destination=e.find("destination").text();var r=new google.maps.LatLng(parseFloat(e.find("latitude").text()),parseFloat(e.find("longitude").text())),t="<div class='info-blob'>"+country+"</div>";a(t,r,mylocation,country,content,destination)}),html+="</ul>",$("#locationList").html($(html)),$(".hdrInfo").html("<span>"+countryL+" countries</span>");var r=$("#locationList ul"),t=r.children("li").get();t.sort(function(e,r){return $(e).text().toUpperCase().localeCompare($(r).text().toUpperCase())}),$("#locationList ul").empty().append(t),$("#locationList ul > li").each(function(){var e=parseInt($(this).attr("id"));$(this).on("click",function(){google.maps.event.trigger(markers[e],"click"),$(".locDiv").animate({marginLeft:"-300px"})})})}),$("#searchInput").keyup(function(){var e=$(this).val().toLowerCase();""==e?$("#locationList ul > li").show():$("#locationList ul > li").each(function(){var r=$(this).text().toLowerCase();r.indexOf(e)>=0?$(this).show():$(this).hide()})}),$("p.alink").click(function(){$(".locDiv").animate({marginLeft:"0"}),infowindow.close()})}();